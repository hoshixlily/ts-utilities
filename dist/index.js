(()=>{"use strict";var t={390:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;const n=r(12),o=r(288);class a{constructor(t=0,e=0,r=0,n=1){this.value=0,this.hex="",this.value=(255&n)<<24|(255&t)<<16|(255&e)<<8|(255&r)<<0,this.hex=`#${a.convertNumberToHex(t)}${a.convertNumberToHex(e)}${a.convertNumberToHex(r)}`.toUpperCase(),a.testColorValueRange(t,e,r,n)}static checkHexValidity(t){const e=t.startsWith("#")?t:"#"+t;if(4!==e.length&&7!==e.length)throw new Error("Invalid hex format")}static convertNumberToHex(t){const e=t.toString(16);return 1===e.length?`0${e}`:e}static convertToLongHex(t){const e=t.startsWith("#"),r=e?t.substring(1):t;if(3!==r.length)throw new Error("Invalid hex");const n=`${r.charAt(0).repeat(2)}${r.charAt(1).repeat(2)}${r.charAt(2).repeat(2)}`;return e?`#${n}`:n}static decode(t){const e=n.Integer.decode(t);return new a(e>>16&255,e>>8&255,255&e)}static testColorValueRange(t,e,r,n){let o=!1,a="";if((n<0||n>255)&&(o=!0,a=`${a} Alpha`),(t<0||t>255)&&(o=!0,a=`${a} Red`),(e<0||e>255)&&(o=!0,a=`${a} Green`),(r<0||r>255)&&(o=!0,a=`${a} Blue`),o)throw new Error("Color parameter outside of expected range: "+a)}static createFromHexString(t){a.checkHexValidity(t),t.startsWith("#")||(t="#"+t);const e=7===t.length?t:a.convertToLongHex(t);return a.decode(e)}brighter(){let t=this.getRed(),e=this.getGreen(),r=this.getBlue(),n=this.getAlpha();const o=Math.trunc(1/(1-a.Factor));return 0===t&&0===e&&0===r?new a(o,o,o,n):(t>0&&t<o&&(t=o),e>0&&e<o&&(e=o),r>0&&r<o&&(r=o),new a(Math.min(Math.trunc(t/a.Factor),255),Math.min(Math.trunc(e/a.Factor),255),Math.min(Math.trunc(r/a.Factor),255),n))}darker(){return new a(Math.max(Math.trunc(this.getRed()*a.Factor),0),Math.max(Math.trunc(this.getGreen()*a.Factor),0),Math.max(Math.trunc(this.getBlue()*a.Factor),0),this.getAlpha())}equals(t){return t instanceof a&&t.getRGB()===this.getRGB()}getAlpha(){return this.getRGB()>>24&255}getBlue(){return this.getRGB()>>0&255}getGreen(){return this.getRGB()>>8&255}getHex(){return this.hex}getRed(){return this.getRGB()>>16&255}getRGB(){return this.value}getRGBAComponents(){return new o.RGBA(this.getRed(),this.getGreen(),this.getBlue(),this.getAlpha())}getRGBComponents(){return new o.RGB(this.getRed(),this.getGreen(),this.getBlue())}}e.Color=a,a.Factor=.7,a.Black=new a(0,0,0),a.Blue=new a(0,0,255),a.Cyan=new a(0,255,255),a.DarkGray=new a(64,64,64),a.Gray=new a(128,128,128),a.Green=new a(0,255,0),a.LightGray=new a(192,192,192),a.Magenta=new a(255,0,255),a.Orange=new a(255,200,0),a.Pink=new a(255,175,175),a.Red=new a(255,0,0),a.White=new a(255,255,255),a.Yellow=new a(255,255,0)},499:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorUtilities=void 0;const n=r(390);class o{static generateGradientPalette(t,e,r){const o="string"==typeof t?n.Color.createFromHexString(t).getRGBComponents():t.getRGBComponents(),a="string"==typeof e?n.Color.createFromHexString(e).getRGBComponents():e.getRGBComponents();let s=0;const i=[];i.push(e instanceof n.Color?e:n.Color.createFromHexString(e));for(let t=1;t<r-1;++t){s+=1/r;const t=Math.trunc(o.RED*s+(1-s)*a.RED),e=Math.trunc(o.GREEN*s+(1-s)*a.GREEN),u=Math.trunc(o.BLUE*s+(1-s)*a.BLUE),l=new n.Color(t,e,u);i.push(l)}return i.push(t instanceof n.Color?t:n.Color.createFromHexString(t)),i.reverse()}static generateRandomColor(){let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return n.Color.createFromHexString(t)}static generateRandomColorList(t){const e=[];for(let r=0;r<t;++r)e.push(o.generateRandomColor());return e}}e.ColorUtilities=o},288:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=e.RGB=void 0;class r{constructor(t,e,r){this.BLUE=0,this.GREEN=0,this.RED=0,this.ensureRGBValueIsInRange(t),this.ensureRGBValueIsInRange(e),this.ensureRGBValueIsInRange(r),this.RED=t,this.GREEN=e,this.BLUE=r}ensureRGBValueIsInRange(t){if(t<0||t>255)throw new Error(`RGB value must be between 0 and 255. Value: ${t}`)}}e.RGB=r,e.RGBA=class extends r{constructor(t,e,r,n){super(t,e,r),this.ALPHA=0,super.ensureRGBValueIsInRange(n),this.ALPHA=n}}},983:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataUtilities=void 0,e.DataUtilities=class{constructor(){}static distinct(t,e,r){null!=e||(e=t=>t),null!=r||(r=(t,e)=>Object.is(t,e));const n=[];for(const o of t){let t=!1;for(const a of n)if(r(e(o),e(a))){t=!0;break}t||n.push(o)}return n}}},12:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Integer=void 0,e.Integer=class{static decode(t){let e,r=10,n=0,o=!1;if(0===t.length)throw new Error("Empty string");const a=t.charAt(0);if("-"===a?(o=!0,n++):"+"===a&&n++,t.startsWith("0x",n)||t.startsWith("0X",n)?(n+=2,r=16):t.startsWith("#")?(n++,r=16):t.startsWith("0",n)&&t.length>1+n&&(n++,r=8),t.startsWith("-",n)||t.startsWith("+",n))throw new Error("Sign character in wrong position");try{e=parseInt(t.substring(n),r),e=o?-e:e}catch(a){const s=o?"-"+t.substring(n):t.substring(n);e=parseInt(s,r)}return e}}},670:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MathUtilities=void 0,e.MathUtilities=class{constructor(){}static degreeToRadian(t){return t*(Math.PI/180)}static radianToDegree(t){return t*(180/Math.PI)}}},126:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NumberUtilities=void 0;class r{constructor(){}static generateRandomNumber(t,e){return Math.floor(Math.random()*(e-t+1)+t)}static generateRandomNumberList(t,e,n){return[...Array(n)].map((()=>r.generateRandomNumber(t,e)))}static generateUniqueRandomNumberList(t,e,n){if(n>=e-t+1)return[...Array(e-t+1).keys()].map((e=>e+t));const o=[],a={};let s=Math.min(n,e-t+1);for(;s>0;){const n=r.generateRandomNumber(t,e);a[n]||(a[n]=!0,o.push(n),--s)}return o}static isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}static max(t,e){const r=t[Symbol.iterator]();let n,o=r.next();if(o.done)return null;for(n=o.value;!o.done;)e?e(o.value)>e(n)&&(n=o.value):o.value>n&&(n=o.value),o=r.next();return n}static min(t,e){const r=t[Symbol.iterator]();let n,o=r.next();if(o.done)return null;for(n=o.value;!o.done;)e?e(o.value)<e(n)&&(n=o.value):o.value<n&&(n=o.value),o=r.next();return n}}e.NumberUtilities=r},163:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StringUtilities=void 0,e.StringUtilities=class{constructor(){}static generateRandomString(t,e){let r=[];null!=e||(e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");const n=e.length;for(let o=0;o<t;o++)r.push(e.charAt(Math.floor(Math.random()*n)));return r.join("")}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,r),a.exports}r(288),r(390),r(499),r(983),r(670),r(126),r(163)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEUsR0NsQkFDLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDQ3RCQSxPQUNBLE9BQ0EsT0FDQSxPQUNBLE9BQ0EsT0FDQSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQG1pcmVpL3RzLXV0aWxpdGllcy8uL3NyYy9jb2xvci9Db2xvci50cyIsIndlYnBhY2s6Ly9AbWlyZWkvdHMtdXRpbGl0aWVzLy4vc3JjL2NvbG9yL0NvbG9yVXRpbGl0aWVzLnRzIiwid2VicGFjazovL0BtaXJlaS90cy11dGlsaXRpZXMvLi9zcmMvY29sb3IvUkdCLnRzIiwid2VicGFjazovL0BtaXJlaS90cy11dGlsaXRpZXMvLi9zcmMvZGF0YS9EYXRhVXRpbGl0aWVzLnRzIiwid2VicGFjazovL0BtaXJlaS90cy11dGlsaXRpZXMvLi9zcmMvaGVscGVycy9JbnRlZ2VyLnRzIiwid2VicGFjazovL0BtaXJlaS90cy11dGlsaXRpZXMvLi9zcmMvbWF0aC9NYXRoVXRpbGl0aWVzLnRzIiwid2VicGFjazovL0BtaXJlaS90cy11dGlsaXRpZXMvLi9zcmMvbnVtYmVyL051bWJlclV0aWxpdGllcy50cyIsIndlYnBhY2s6Ly9AbWlyZWkvdHMtdXRpbGl0aWVzLy4vc3JjL3N0cmluZy9TdHJpbmdVdGlsaXRpZXMudHMiLCJ3ZWJwYWNrOi8vQG1pcmVpL3RzLXV0aWxpdGllcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AbWlyZWkvdHMtdXRpbGl0aWVzLy4vc3JjL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEludGVnZXIgfSBmcm9tIFwiLi4vaGVscGVycy9JbnRlZ2VyXCI7XG5pbXBvcnQgeyBSR0IsIFJHQkEgfSBmcm9tIFwiLi9SR0JcIjtcblxuLyoqXG4gKiBBIHNpbXBsZSBjbGFzcyBmb3IgcmVwcmVzZW50aW5nIGNvbG9ycy48YnIvPlxuICogTW9zdCBvZiB0aGUgbG9naWMgZm9yIHRoaXMgY2xhc3Mgd2FzIHRha2VuIGZyb20gdGhlIDxiPmphdmEuYXd0LkNvbG9yPC9iPiBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBGYWN0b3I6IG51bWJlciA9IDAuNztcblxuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQmxhY2sgPSBuZXcgQ29sb3IoMCwgMCwgMCk7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBCbHVlID0gbmV3IENvbG9yKDAsIDAsIDI1NSk7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDeWFuID0gbmV3IENvbG9yKDAsIDI1NSwgMjU1KTtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERhcmtHcmF5ID0gbmV3IENvbG9yKDY0LCA2NCwgNjQpO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3JheSA9IG5ldyBDb2xvcigxMjgsIDEyOCwgMTI4KTtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEdyZWVuID0gbmV3IENvbG9yKDAsIDI1NSwgMCk7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBMaWdodEdyYXkgPSBuZXcgQ29sb3IoMTkyLCAxOTIsIDE5Mik7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBNYWdlbnRhID0gbmV3IENvbG9yKDI1NSwgMCwgMjU1KTtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9yYW5nZSA9IG5ldyBDb2xvcigyNTUsIDIwMCwgMCk7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBQaW5rID0gbmV3IENvbG9yKDI1NSwgMTc1LCAxNzUpO1xuICAgIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUmVkID0gbmV3IENvbG9yKDI1NSwgMCwgMCk7XG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBXaGl0ZSA9IG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1KTtcbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFllbGxvdyA9IG5ldyBDb2xvcigyNTUsIDI1NSwgMCk7XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IHZhbHVlOiBudW1iZXIgPSAwO1xuICAgIHB1YmxpYyByZWFkb25seSBoZXg6IHN0cmluZyA9IFwiXCI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKTtcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocmVkOiBudW1iZXIsIGdyZWVuOiBudW1iZXIsIGJsdWU6IG51bWJlciwgYWxwaGE/OiBudW1iZXIpO1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihyZWQ6IG51bWJlciA9IDAsIGdyZWVuOiBudW1iZXIgPSAwLCBibHVlOiBudW1iZXIgPSAwLCBhbHBoYTogbnVtYmVyID0gMSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gKChhbHBoYSAmIDB4ZmYpIDw8IDI0KSB8ICgocmVkICYgMHhmZikgPDwgMTYpIHwgKChncmVlbiAmIDB4ZmYpIDw8IDgpIHwgKChibHVlICYgMHhmZikgPDwgMCk7XG4gICAgICAgIHRoaXMuaGV4ID0gYCMke0NvbG9yLmNvbnZlcnROdW1iZXJUb0hleChyZWQpfSR7Q29sb3IuY29udmVydE51bWJlclRvSGV4KGdyZWVuKX0ke0NvbG9yLmNvbnZlcnROdW1iZXJUb0hleChcbiAgICAgICAgICAgIGJsdWVcbiAgICAgICAgKX1gLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIENvbG9yLnRlc3RDb2xvclZhbHVlUmFuZ2UocmVkLCBncmVlbiwgYmx1ZSwgYWxwaGEpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNoZWNrSGV4VmFsaWRpdHkoaGV4OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFzaGVkSGV4ID0gaGV4LnN0YXJ0c1dpdGgoXCIjXCIpID8gaGV4IDogXCIjXCIgKyBoZXg7XG4gICAgICAgIGlmIChoYXNoZWRIZXgubGVuZ3RoID09PSA0IHx8IGhhc2hlZEhleC5sZW5ndGggPT09IDcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleCBmb3JtYXRcIik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29udmVydE51bWJlclRvSGV4KG51bTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaGV4ID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT09IDEgPyBgMCR7aGV4fWAgOiBoZXg7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY29udmVydFRvTG9uZ0hleChzaG9ydEhleDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaGFzSGFzaCA9IHNob3J0SGV4LnN0YXJ0c1dpdGgoXCIjXCIpO1xuICAgICAgICBjb25zdCBoZXhXaXRob3V0SGFzaCA9IGhhc0hhc2ggPyBzaG9ydEhleC5zdWJzdHJpbmcoMSkgOiBzaG9ydEhleDtcbiAgICAgICAgaWYgKGhleFdpdGhvdXRIYXNoLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXhcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9uZ0hleCA9IGAke2hleFdpdGhvdXRIYXNoLmNoYXJBdCgwKS5yZXBlYXQoMil9JHtoZXhXaXRob3V0SGFzaC5jaGFyQXQoMSkucmVwZWF0KDIpfSR7aGV4V2l0aG91dEhhc2hcbiAgICAgICAgICAgIC5jaGFyQXQoMilcbiAgICAgICAgICAgIC5yZXBlYXQoMil9YDtcbiAgICAgICAgcmV0dXJuIGhhc0hhc2ggPyBgIyR7bG9uZ0hleH1gIDogbG9uZ0hleDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBkZWNvZGUoY29sb3JTdHJpbmc6IHN0cmluZyk6IENvbG9yIHtcbiAgICAgICAgY29uc3QgaW50VmFsdWUgPSBJbnRlZ2VyLmRlY29kZShjb2xvclN0cmluZyk7XG4gICAgICAgIHJldHVybiBuZXcgQ29sb3IoKGludFZhbHVlID4+IDE2KSAmIDB4ZmYsIChpbnRWYWx1ZSA+PiA4KSAmIDB4ZmYsIGludFZhbHVlICYgMHhmZik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGVzdENvbG9yVmFsdWVSYW5nZShyZWQ6IG51bWJlciwgZ3JlZW46IG51bWJlciwgYmx1ZTogbnVtYmVyLCBhbHBoYTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGxldCByYW5nZUVycm9yID0gZmFsc2U7XG4gICAgICAgIGxldCBiYWRDb21wb25lbnRTdHJpbmcgPSBcIlwiO1xuICAgICAgICBpZiAoYWxwaGEgPCAwIHx8IGFscGhhID4gMjU1KSB7XG4gICAgICAgICAgICByYW5nZUVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIGJhZENvbXBvbmVudFN0cmluZyA9IGAke2JhZENvbXBvbmVudFN0cmluZ30gQWxwaGFgO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZWQgPCAwIHx8IHJlZCA+IDI1NSkge1xuICAgICAgICAgICAgcmFuZ2VFcnJvciA9IHRydWU7XG4gICAgICAgICAgICBiYWRDb21wb25lbnRTdHJpbmcgPSBgJHtiYWRDb21wb25lbnRTdHJpbmd9IFJlZGA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdyZWVuIDwgMCB8fCBncmVlbiA+IDI1NSkge1xuICAgICAgICAgICAgcmFuZ2VFcnJvciA9IHRydWU7XG4gICAgICAgICAgICBiYWRDb21wb25lbnRTdHJpbmcgPSBgJHtiYWRDb21wb25lbnRTdHJpbmd9IEdyZWVuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmx1ZSA8IDAgfHwgYmx1ZSA+IDI1NSkge1xuICAgICAgICAgICAgcmFuZ2VFcnJvciA9IHRydWU7XG4gICAgICAgICAgICBiYWRDb21wb25lbnRTdHJpbmcgPSBgJHtiYWRDb21wb25lbnRTdHJpbmd9IEJsdWVgO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyYW5nZUVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb2xvciBwYXJhbWV0ZXIgb3V0c2lkZSBvZiBleHBlY3RlZCByYW5nZTogXCIgKyBiYWRDb21wb25lbnRTdHJpbmcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbG9yIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBoZXggc3RyaW5nLiBUaGlzIG1ldGhvZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBnaXZlbiBoZXggc3RyaW5nIGlzIGludmFsaWQuXG4gICAgICogQHBhcmFtIGhleENvbG9yIFRoZSBoZXggc3RyaW5nIGZyb20gd2hpY2ggdGhlIGNvbG9yIG9iamVjdCB3aWxsIGJlIGNyZWF0ZWQuXG4gICAgICogQHJldHVybiBBIGNvbG9yIG9iamVjdCB3aGljaCByZXByZXNlbnRzIHRoZSBjb2xvciBnaXZlbiBieSB0aGUgaGV4Q29sb3IgcGFyYW1ldGVyLlxuICAgICAqIEB0aHJvd3MgQW4gZXhjZXB0aW9uIGlmIHRoZSBnaXZlbiBoZXhDb2xvciBwYXJhbWV0ZXIgaXMgbm90IGEgdmFsaWQgY29sb3Igc3RyaW5nLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRnJvbUhleFN0cmluZyhoZXhDb2xvcjogc3RyaW5nKTogQ29sb3Ige1xuICAgICAgICBDb2xvci5jaGVja0hleFZhbGlkaXR5KGhleENvbG9yKTtcbiAgICAgICAgaWYgKCFoZXhDb2xvci5zdGFydHNXaXRoKFwiI1wiKSkge1xuICAgICAgICAgICAgaGV4Q29sb3IgPSBcIiNcIiArIGhleENvbG9yO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhleCA9IGhleENvbG9yLmxlbmd0aCA9PT0gNyA/IGhleENvbG9yIDogQ29sb3IuY29udmVydFRvTG9uZ0hleChoZXhDb2xvcik7XG4gICAgICAgIHJldHVybiBDb2xvci5kZWNvZGUoaGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgYnJpZ2h0ZXIgdmVyc2lvbiBvZiB0aGlzIGNvbG9yIGJ5IHVzaW5nIGFuIGFyYml0cmFyeSBmYWN0b3IuXG4gICAgICogQHJldHVybiBBIG5ldyBjb2xvciBvYmplY3QgdGhhdCBpcyBicmlnaHRlciB0aGFuIHRoaXMgY29sb3IuXG4gICAgICovXG4gICAgcHVibGljIGJyaWdodGVyKCk6IENvbG9yIHtcbiAgICAgICAgbGV0IHJlZCA9IHRoaXMuZ2V0UmVkKCk7XG4gICAgICAgIGxldCBncmVlbiA9IHRoaXMuZ2V0R3JlZW4oKTtcbiAgICAgICAgbGV0IGJsdWUgPSB0aGlzLmdldEJsdWUoKTtcbiAgICAgICAgbGV0IGFscGhhID0gdGhpcy5nZXRBbHBoYSgpO1xuICAgICAgICBjb25zdCBpID0gTWF0aC50cnVuYygxLjAgLyAoMS4wIC0gQ29sb3IuRmFjdG9yKSk7XG5cbiAgICAgICAgaWYgKHJlZCA9PT0gMCAmJiBncmVlbiA9PT0gMCAmJiBibHVlID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKGksIGksIGksIGFscGhhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVkID4gMCAmJiByZWQgPCBpKSB7XG4gICAgICAgICAgICByZWQgPSBpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChncmVlbiA+IDAgJiYgZ3JlZW4gPCBpKSB7XG4gICAgICAgICAgICBncmVlbiA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsdWUgPiAwICYmIGJsdWUgPCBpKSB7XG4gICAgICAgICAgICBibHVlID0gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENvbG9yKFxuICAgICAgICAgICAgTWF0aC5taW4oTWF0aC50cnVuYyhyZWQgLyBDb2xvci5GYWN0b3IpLCAyNTUpLFxuICAgICAgICAgICAgTWF0aC5taW4oTWF0aC50cnVuYyhncmVlbiAvIENvbG9yLkZhY3RvciksIDI1NSksXG4gICAgICAgICAgICBNYXRoLm1pbihNYXRoLnRydW5jKGJsdWUgLyBDb2xvci5GYWN0b3IpLCAyNTUpLFxuICAgICAgICAgICAgYWxwaGFcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgZGFya2VyIHZlcnNpb24gb2YgdGhpcyBjb2xvciBieSB1c2luZyBhbiBhcmJpdHJhcnkgZmFjdG9yLlxuICAgICAqIEByZXR1cm4gQSBuZXcgY29sb3Igb2JqZWN0IHRoYXQgaXMgZGFya2VyIHRoYW4gdGhpcyBjb2xvci5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGFya2VyKCk6IENvbG9yIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihcbiAgICAgICAgICAgIE1hdGgubWF4KE1hdGgudHJ1bmModGhpcy5nZXRSZWQoKSAqIENvbG9yLkZhY3RvciksIDApLFxuICAgICAgICAgICAgTWF0aC5tYXgoTWF0aC50cnVuYyh0aGlzLmdldEdyZWVuKCkgKiBDb2xvci5GYWN0b3IpLCAwKSxcbiAgICAgICAgICAgIE1hdGgubWF4KE1hdGgudHJ1bmModGhpcy5nZXRCbHVlKCkgKiBDb2xvci5GYWN0b3IpLCAwKSxcbiAgICAgICAgICAgIHRoaXMuZ2V0QWxwaGEoKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGlzIGNvbG9yIGhhcyB0aGUgc2FtZSByZ2IgdmFsdWUgd2l0aCB0aGUgZ2l2ZW4gY29sb3IuXG4gICAgICogQHBhcmFtIGNvbG9yIHRydWUgaWYgY29sb3JzIGhhdmUgdGhlIHNhbWUgcmdiIHZhbHVlLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcHVibGljIGVxdWFscyhjb2xvcjogQ29sb3IpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yIGluc3RhbmNlb2YgQ29sb3IgJiYgY29sb3IuZ2V0UkdCKCkgPT09IHRoaXMuZ2V0UkdCKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYWxwaGEgdmFsdWUgb2YgdGhlIGNvbG9yLlxuICAgICAqIEByZXR1cm5zIHRoZSBhbHBoYSB2YWx1ZSBvZiB0aGUgY29sb3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0QWxwaGEoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldFJHQigpID4+IDI0KSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYmx1ZSB2YWx1ZSBvZiB0aGUgY29sb3IuXG4gICAgICogQHJldHVybnMgdGhlIGJsdWUgdmFsdWUgb2YgdGhlIGNvbG9yXG4gICAgICovXG4gICAgcHVibGljIGdldEJsdWUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldFJHQigpID4+IDApICYgMHhmZjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBncmVlbiB2YWx1ZSBvZiB0aGUgY29sb3IuXG4gICAgICogQHJldHVybnMgdGhlIGdyZWVuIHZhbHVlIG9mIHRoZSBjb2xvclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRHcmVlbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHRoaXMuZ2V0UkdCKCkgPj4gOCkgJiAweGZmO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGhleCBzdHJpbmcgdmVyc2lvbiBvZiB0aGlzIGNvbG9yLiBSZXR1cm5lZCBzdHJpbmcgd2lsbCBoYXZlIGEgbGVhZGluZyAjIHN5bWJvbC5cbiAgICAgKiBAcmV0dXJuIHRoZSBoZXggc3RyaW5nIHZlcnNpb24gb2YgdGhpcyBjb2xvclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRIZXgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlZCB2YWx1ZSBvZiB0aGUgY29sb3IuXG4gICAgICogQHJldHVybnMgdGhlIHJlZCB2YWx1ZSBvZiB0aGUgY29sb3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UmVkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAodGhpcy5nZXRSR0IoKSA+PiAxNikgJiAweGZmO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGludGVnZXIgdmFsdWUgb2YgdGhpcyBjb2xvci5cbiAgICAgKiBAcmV0dXJuIHRoZSBpbnRlZ2VyIHZhbHVlIG9mIHRoaXMgY29sb3IuXG4gICAgICovXG4gICAgcHVibGljIGdldFJHQigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aGljaCBjb250YWlucyB0aGUgdmFsdWVzIG9mIHJlZCwgZ3JlZW4sIGJsdWUgYW5kIGFscGhhIGNvbXBvbmVudHMgb2YgdGhpcyBjb2xvci5cbiAgICAgKiBAcmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBSLEcsQixBIHZhbHVlcyBvZiB0aGUgY29sb3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0UkdCQUNvbXBvbmVudHMoKTogUkdCQSB7XG4gICAgICAgIHJldHVybiBuZXcgUkdCQSh0aGlzLmdldFJlZCgpLCB0aGlzLmdldEdyZWVuKCksIHRoaXMuZ2V0Qmx1ZSgpLCB0aGlzLmdldEFscGhhKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSB2YWx1ZXMgb2YgcmVkLCBncmVlbiBhbmQgYmx1ZSBjb21wb25lbnRzIG9mIHRoaXMgY29sb3IuXG4gICAgICogQHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgUixHLEIgdmFsdWVzIG9mIHRoZSBjb2xvclxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRSR0JDb21wb25lbnRzKCk6IFJHQiB7XG4gICAgICAgIHJldHVybiBuZXcgUkdCKHRoaXMuZ2V0UmVkKCksIHRoaXMuZ2V0R3JlZW4oKSwgdGhpcy5nZXRCbHVlKCkpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbG9yIH0gZnJvbSBcIi4vQ29sb3JcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbG9yVXRpbGl0aWVzIHtcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBncmFkaWVudCBwYWxldHRlIHVzaW5nIHRoZSBnaXZlbiBzdGFydENvbG9yIGFuZCBlbmRDb2xvciB2YWx1ZXMuIFRoZSBzaXplIG9mIHRoZSBwYWxldHRlIGlzIGRldGVybWluZWQgYnkgdGhlXG4gICAgICogY29sb3JDb3VudCBwYXJhbWV0ZXIuXG4gICAgICogQHBhcmFtIHN0YXJ0Q29sb3IgTGVmdCBzaWRlIGNvbG9yIG9mIHRoZSBwYWxldHRlLiBJdCBjYW4gYmUgYSBjb2xvciBvYmplY3Qgb3IgYSB2YWxpZCBoZXggc3RyaW5nLlxuICAgICAqIEBwYXJhbSBlbmRDb2xvciBSaWdodCBzaWRlIGNvbG9yIG9mIHRoZSBwYWxldHRlLiBJdCBjYW4gYmUgYSBjb2xvciBvYmplY3Qgb3IgYSB2YWxpZCBoZXggc3RyaW5nLlxuICAgICAqIEBwYXJhbSBjb2xvckNvdW50IFRoZSBudW1iZXIgb2YgY29sb3JzIGVsZW1lbnRzIG9mIHRoZSBwYWxldHRlXG4gICAgICogQHJldHVybiBBbiBhcnJheSBvZiBjb2xvciBvYmplY3RzIHdoaWNoIHJlcHJlc2VudHMgdGhlIGNvbG9ycyBvZiB0aGUgcGFsZXR0ZVxuICAgICAqIEB0aHJvd3MgQW4gZXhjZXB0aW9uIGlmIHRoZSBnaXZlbiBjb2xvcnMgYXJlIGludmFsaWQuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZUdyYWRpZW50UGFsZXR0ZShcbiAgICAgICAgc3RhcnRDb2xvcjogQ29sb3IgfCBzdHJpbmcsXG4gICAgICAgIGVuZENvbG9yOiBDb2xvciB8IHN0cmluZyxcbiAgICAgICAgY29sb3JDb3VudDogbnVtYmVyXG4gICAgKTogQ29sb3JbXSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0UkdCID1cbiAgICAgICAgICAgIHR5cGVvZiBzdGFydENvbG9yID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgPyBDb2xvci5jcmVhdGVGcm9tSGV4U3RyaW5nKHN0YXJ0Q29sb3IpLmdldFJHQkNvbXBvbmVudHMoKVxuICAgICAgICAgICAgICAgIDogc3RhcnRDb2xvci5nZXRSR0JDb21wb25lbnRzKCk7XG4gICAgICAgIGNvbnN0IGVuZFJHQiA9XG4gICAgICAgICAgICB0eXBlb2YgZW5kQ29sb3IgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICA/IENvbG9yLmNyZWF0ZUZyb21IZXhTdHJpbmcoZW5kQ29sb3IpLmdldFJHQkNvbXBvbmVudHMoKVxuICAgICAgICAgICAgICAgIDogZW5kQ29sb3IuZ2V0UkdCQ29tcG9uZW50cygpO1xuICAgICAgICBsZXQgYWxwaGEgPSAwLjA7XG4gICAgICAgIGNvbnN0IHBhbGV0dGU6IENvbG9yW10gPSBbXTtcblxuICAgICAgICBwYWxldHRlLnB1c2goZW5kQ29sb3IgaW5zdGFuY2VvZiBDb2xvciA/IGVuZENvbG9yIDogQ29sb3IuY3JlYXRlRnJvbUhleFN0cmluZyhlbmRDb2xvcikpO1xuICAgICAgICBmb3IgKGxldCBwaSA9IDE7IHBpIDwgY29sb3JDb3VudCAtIDE7ICsrcGkpIHtcbiAgICAgICAgICAgIGFscGhhICs9IDEuMCAvIGNvbG9yQ291bnQ7XG4gICAgICAgICAgICBjb25zdCByID0gTWF0aC50cnVuYyhzdGFydFJHQi5SRUQgKiBhbHBoYSArICgxIC0gYWxwaGEpICogZW5kUkdCLlJFRCk7XG4gICAgICAgICAgICBjb25zdCBnID0gTWF0aC50cnVuYyhzdGFydFJHQi5HUkVFTiAqIGFscGhhICsgKDEgLSBhbHBoYSkgKiBlbmRSR0IuR1JFRU4pO1xuICAgICAgICAgICAgY29uc3QgYiA9IE1hdGgudHJ1bmMoc3RhcnRSR0IuQkxVRSAqIGFscGhhICsgKDEgLSBhbHBoYSkgKiBlbmRSR0IuQkxVRSk7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IG5ldyBDb2xvcihyLCBnLCBiKTtcbiAgICAgICAgICAgIHBhbGV0dGUucHVzaChjb2xvcik7XG4gICAgICAgIH1cbiAgICAgICAgcGFsZXR0ZS5wdXNoKHN0YXJ0Q29sb3IgaW5zdGFuY2VvZiBDb2xvciA/IHN0YXJ0Q29sb3IgOiBDb2xvci5jcmVhdGVGcm9tSGV4U3RyaW5nKHN0YXJ0Q29sb3IpKTtcbiAgICAgICAgcmV0dXJuIHBhbGV0dGUucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIHJhbmRvbSBjb2xvci5cbiAgICAgKiBAcmV0dXJuIEEgY29sb3Igb2JqZWN0IHdoaWNoIHJlcHJlc2VudHMgdGhlIHJhbmRvbWx5LWdlbmVyYXRlZCBjb2xvci5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdlbmVyYXRlUmFuZG9tQ29sb3IoKTogQ29sb3Ige1xuICAgICAgICBjb25zdCBsZXR0ZXJzID0gXCIwMTIzNDU2Nzg5QUJDREVGXCI7XG4gICAgICAgIGxldCBjb2xvciA9IFwiI1wiO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgY29sb3IgKz0gbGV0dGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNildO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb2xvci5jcmVhdGVGcm9tSGV4U3RyaW5nKGNvbG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBsaXN0IG9mIHJhbmRvbSBjb2xvcnMuXG4gICAgICogQHBhcmFtIHNpemUgTnVtYmVyIG9mIGNvbG9ycyB0byBiZSBnZW5lcmF0ZWQuXG4gICAgICogQHJldHVybiBBbiBhcnJheSBvZiByYW5kb21seS1jcmVhdGVkIENvbG9yIG9iamVjdHMuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbUNvbG9yTGlzdChzaXplOiBudW1iZXIpOiBDb2xvcltdIHtcbiAgICAgICAgY29uc3QgY29sb3JzOiBDb2xvcltdID0gW107XG4gICAgICAgIGZvciAobGV0IGN4ID0gMDsgY3ggPCBzaXplOyArK2N4KSB7XG4gICAgICAgICAgICBjb2xvcnMucHVzaChDb2xvclV0aWxpdGllcy5nZW5lcmF0ZVJhbmRvbUNvbG9yKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBSZXByZXNlbnRzIGFuIFJHQiBjb2xvci5cbiAqL1xuZXhwb3J0IGNsYXNzIFJHQiB7XG4gICAgLyoqXG4gICAgICogVGhlIGJsdWUgdmFsdWUgb2YgdGhlIGNvbG9yLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBCTFVFOiBudW1iZXIgPSAwO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGdyZWVuIHZhbHVlIG9mIHRoZSBjb2xvci5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgR1JFRU46IG51bWJlciA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVkIHZhbHVlIG9mIHRoZSBjb2xvci5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgUkVEOiBudW1iZXIgPSAwO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHI6IG51bWJlciwgZzogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSR0JWYWx1ZUlzSW5SYW5nZShyKTtcbiAgICAgICAgdGhpcy5lbnN1cmVSR0JWYWx1ZUlzSW5SYW5nZShnKTtcbiAgICAgICAgdGhpcy5lbnN1cmVSR0JWYWx1ZUlzSW5SYW5nZShiKTtcbiAgICAgICAgdGhpcy5SRUQgPSByO1xuICAgICAgICB0aGlzLkdSRUVOID0gZztcbiAgICAgICAgdGhpcy5CTFVFID0gYjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZW5zdXJlUkdCVmFsdWVJc0luUmFuZ2UodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID4gMjU1KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJHQiB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMjU1LiBWYWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIFJHQkEgY29sb3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBSR0JBIGV4dGVuZHMgUkdCIHtcbiAgICAvKipcbiAgICAgKiBUaGUgYWxwaGEgdmFsdWUgb2YgdGhlIGNvbG9yLlxuICAgICAqL1xuICAgIHB1YmxpYyByZWFkb25seSBBTFBIQTogbnVtYmVyID0gMDtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIociwgZywgYik7XG4gICAgICAgIHN1cGVyLmVuc3VyZVJHQlZhbHVlSXNJblJhbmdlKGEpO1xuICAgICAgICB0aGlzLkFMUEhBID0gYTtcbiAgICB9XG59XG4iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgRGF0YVV0aWxpdGllcyB7XG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhIGdpdmVuIGl0ZXJhYmxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaXRlcmFibGUgQ29sbGVjdGlvbiBvZiBpdGVtc1xuICAgICAqIEBwYXJhbSBzZWxlY3RvciBBIG1ldGhvZCB0aGF0IHdpbGwgYmUgdXNlZCB0byByZXR1cm4gYSBrZXkgd2hpY2ggd2lsbCBiZSB1c2VkIHRvIGRldGVybWluZSB0aGUgZGlzdGluY3RuZXNzLiBJZiBub3QgcHJvdmlkZWQsXG4gICAgICogICAgICAgICAgICAgICAgIHRoZW4gdGhlIGl0ZW0gaXRzZWxmIHdpbGwgYmUgdXNlZCBhcyB0aGUga2V5LlxuICAgICAqIEBwYXJhbSBjb21wYXJhdG9yIEEgbWV0aG9kIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNvbXBhcmUgdGhlIGVxdWFsaXR5IG9mIHRoZSBzZWxlY3RvciBrZXlzLlxuICAgICAqIEByZXR1cm4gQW4gYXJyYXkgb2YgZGlzdGluY3QgaXRlbXMuXG4gICAgICogQHRocm93cyBBbiBlcnJvciBpZiB0aGUgaXRlcmFibGUgaXMgbnVsbCBvciB1bmRlZmluZWQuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBkaXN0aW5jdDxURWxlbWVudCwgVEtleT4oXG4gICAgICAgIGl0ZXJhYmxlOiBJdGVyYWJsZTxURWxlbWVudD4sXG4gICAgICAgIHNlbGVjdG9yPzogKGl0ZW06IFRFbGVtZW50KSA9PiBUS2V5LFxuICAgICAgICBjb21wYXJhdG9yPzogKGtleTE6IFRLZXksIGtleTI6IFRLZXkpID0+IGJvb2xlYW5cbiAgICApOiBBcnJheTxURWxlbWVudD4ge1xuICAgICAgICBzZWxlY3RvciA/Pz0gKGl0ZW06IFRFbGVtZW50KTogVEtleSA9PiBpdGVtIGFzIHVua25vd24gYXMgVEtleTtcbiAgICAgICAgY29tcGFyYXRvciA/Pz0gKGtleTE6IFRLZXksIGtleTI6IFRLZXkpOiBib29sZWFuID0+IE9iamVjdC5pcyhrZXkxLCBrZXkyKTtcbiAgICAgICAgY29uc3QgZGlzdGluY3RMaXN0OiBURWxlbWVudFtdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVyYWJsZSkge1xuICAgICAgICAgICAgbGV0IGV4aXN0cyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBkaXN0aW5jdEl0ZW0gb2YgZGlzdGluY3RMaXN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmF0b3Ioc2VsZWN0b3IoaXRlbSksIHNlbGVjdG9yKGRpc3RpbmN0SXRlbSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgZGlzdGluY3RMaXN0LnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3RpbmN0TGlzdDtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgSW50ZWdlciB7XG4gICAgLyoqXG4gICAgICogRGVjb2RlIGEgbnVtYmVyIGZyb20gYSBzdHJpbmcuIFRha2VuIGZyb20gSmF2YSdzIEludGVnZXIuZGVjb2RlKCkgbWV0aG9kLlxuICAgICAqIEBwYXJhbSBudW1TdHIgVGhlIHN0cmluZyB0byBkZWNvZGUuXG4gICAgICogQHJldHVybiBUaGUgZGVjb2RlZCBudW1iZXIuXG4gICAgICogQHRocm93cyBFcnJvciBpZiB0aGUgc3RyaW5nIGlzIGVtcHR5LlxuICAgICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIHNpZ24gY2hhcmFjdGVyIGlzIGluIHRoZSB3cm9uZyBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGRlY29kZShudW1TdHI6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIGxldCByYWRpeCA9IDEwO1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBsZXQgbmVnYXRpdmUgPSBmYWxzZTtcbiAgICAgICAgbGV0IHJlc3VsdDogbnVtYmVyO1xuXG4gICAgICAgIGlmIChudW1TdHIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbXB0eSBzdHJpbmdcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlyc3RDaGFyID0gbnVtU3RyLmNoYXJBdCgwKTtcbiAgICAgICAgaWYgKGZpcnN0Q2hhciA9PT0gXCItXCIpIHtcbiAgICAgICAgICAgIG5lZ2F0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlyc3RDaGFyID09PSBcIitcIikge1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVtU3RyLnN0YXJ0c1dpdGgoXCIweFwiLCBpbmRleCkgfHwgbnVtU3RyLnN0YXJ0c1dpdGgoXCIwWFwiLCBpbmRleCkpIHtcbiAgICAgICAgICAgIGluZGV4ICs9IDI7XG4gICAgICAgICAgICByYWRpeCA9IDE2O1xuICAgICAgICB9IGVsc2UgaWYgKG51bVN0ci5zdGFydHNXaXRoKFwiI1wiKSkge1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIHJhZGl4ID0gMTY7XG4gICAgICAgIH0gZWxzZSBpZiAobnVtU3RyLnN0YXJ0c1dpdGgoXCIwXCIsIGluZGV4KSAmJiBudW1TdHIubGVuZ3RoID4gMSArIGluZGV4KSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICAgICAgcmFkaXggPSA4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChudW1TdHIuc3RhcnRzV2l0aChcIi1cIiwgaW5kZXgpIHx8IG51bVN0ci5zdGFydHNXaXRoKFwiK1wiLCBpbmRleCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ24gY2hhcmFjdGVyIGluIHdyb25nIHBvc2l0aW9uXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBwYXJzZUludChudW1TdHIuc3Vic3RyaW5nKGluZGV4KSwgcmFkaXgpO1xuICAgICAgICAgICAgcmVzdWx0ID0gbmVnYXRpdmUgPyAtcmVzdWx0IDogcmVzdWx0O1xuICAgICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAgICAgICBjb25zdCBjb25zdGFudCA9IG5lZ2F0aXZlID8gXCItXCIgKyBudW1TdHIuc3Vic3RyaW5nKGluZGV4KSA6IG51bVN0ci5zdWJzdHJpbmcoaW5kZXgpO1xuICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VJbnQoY29uc3RhbnQsIHJhZGl4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYXRoVXRpbGl0aWVzIHtcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFuc1xuICAgICAqIEBwYXJhbSBkZWdyZWUgVGhlIGRlZ3JlZSB2YWx1ZSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIHJhZGlhbnMuXG4gICAgICogQHJldHVybiBUaGUgcmFkaWFuIGVxdWFsIG9mIHRoZSBnaXZlbiBkZWdyZWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGRlZ3JlZVRvUmFkaWFuKGRlZ3JlZTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIGRlZ3JlZSAqIChNYXRoLlBJIC8gMTgwLjApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHJhZGlhbnMgdG8gZGVncmVlc1xuICAgICAqIEBwYXJhbSByYWRpYW4gVGhlIHJhZGlhbiB2YWx1ZSB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIGRlZ3JlZXMuXG4gICAgICogQHJldHVybiBUaGUgZGVncmVlIGVxdWFsIG9mIHRoZSBnaXZlbiByYWRpYW5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHJhZGlhblRvRGVncmVlKHJhZGlhbjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHJhZGlhbiAqICgxODAuMCAvIE1hdGguUEkpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOdW1iZXJVdGlsaXRpZXMge1xuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgcmFuZG9tIG51bWJlciBiZXR3ZWVuIHRoZSBnaXZlbiBtaW4tbWF4IGludGVydmFscy4gVGhlIGludGVydmFsIGJvdW5kcywgbWluIGFuZCBtYXgsIGFyZSBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG1pbiBTbWFsbGVzdCB2YWx1ZSB0aGF0IHRoZSBnZW5lcmF0ZWQgcmFuZG9tIG51bWJlciBjYW4gdGFrZVxuICAgICAqIEBwYXJhbSBtYXggR3JlYXRlc3QgdmFsdWUgdGhhdCB0aGUgZ2VuZXJhdGVkIHJhbmRvbSBudW1iZXIgY2FuIHRha2VcbiAgICAgKiBAcmV0dXJuIEEgcmFuZG9tbHkgZ2VuZXJhdGVkIG51bWJlciB3aG9zZSB2YWx1ZSBpcyBiZXR3ZWVuIFttaW4sIG1heF0uXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbU51bWJlcihtaW46IG51bWJlciwgbWF4OiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpICsgbWluKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSByYW5kb20gbnVtYmVyIGJldHdlZW4gdGhlIGdpdmVuIG1pbi1tYXggaW50ZXJ2YWxzLiBUaGUgaW50ZXJ2YWwgYm91bmRzLCBtaW4gYW5kIG1heCwgYXJlIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbWluIFNtYWxsZXN0IHZhbHVlIHRoYXQgdGhlIGdlbmVyYXRlZCByYW5kb20gbnVtYmVyIGNhbiB0YWtlXG4gICAgICogQHBhcmFtIG1heCBHcmVhdGVzdCB2YWx1ZSB0aGF0IHRoZSBnZW5lcmF0ZWQgcmFuZG9tIG51bWJlciBjYW4gdGFrZVxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgY291bnQgb2YgcmFuZG9tIG51bWJlcnMgdG8gYmUgZ2VuZXJhdGVkXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbU51bWJlckxpc3QobWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBjb3VudDogbnVtYmVyKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gWy4uLkFycmF5KGNvdW50KV0ubWFwKCgpID0+IE51bWJlclV0aWxpdGllcy5nZW5lcmF0ZVJhbmRvbU51bWJlcihtaW4sIG1heCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhIGxpc3Qgb2YgcmFuZG9tIG51bWJlcnMgdGhhdCBhcmUgdW5pcXVlLiBJZiB0aGUgcmVxdWlyZWQgY291bnQgaXMgYmlnZ2VyIHRoYW5cbiAgICAgKiB0aGUgbnVtYmVycyBvZiBhbGwgcG9zc2libGUgbnVtYmVycyB0aGF0IGNhbiBiZSBnZW5lcmF0ZWQgYmV0d2VlbiB0aGUgZ2l2ZW4gbWluIGFuZCBtYXggdmFsdWVzLFxuICAgICAqIHRoZW4gdGhlIHJlc3VsdGluZyBsaXN0IHdpbGwgaGF2ZSBsZXNzIGVsZW1lbnRzIHRoYW4gdGhlIHJlcXVpcmVkIHNpemUuXG4gICAgICogQHBhcmFtIG1pbiBTbWFsbGVzdCB2YWx1ZSB0aGF0IHRoZSBnZW5lcmF0ZWQgcmFuZG9tIG51bWJlciBjYW4gdGFrZVxuICAgICAqIEBwYXJhbSBtYXggR3JlYXRlc3QgdmFsdWUgdGhhdCB0aGUgZ2VuZXJhdGVkIHJhbmRvbSBudW1iZXIgY2FuIHRha2VcbiAgICAgKiBAcGFyYW0gY291bnQgVGhlIGNvdW50IG9mIHJhbmRvbSBudW1iZXJzIHRvIGJlIGdlbmVyYXRlZFxuICAgICAqIEByZXR1cm4gQSBsaXN0IG9mIHJhbmRvbWx5LWdlbmVyYXRlZCB1bmlxdWUgbnVtYmVyc1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2VuZXJhdGVVbmlxdWVSYW5kb21OdW1iZXJMaXN0KG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgY291bnQ6IG51bWJlcik6IG51bWJlcltdIHtcbiAgICAgICAgaWYgKGNvdW50ID49IG1heCAtIG1pbiArIDEpIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uQXJyYXkobWF4IC0gbWluICsgMSkua2V5cygpXS5tYXAodiA9PiB2ICsgbWluKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudW1iZXJzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBjb25zdCBudW1iZXJEaWN0OiBSZWNvcmQ8bnVtYmVyLCBib29sZWFuPiA9IHt9O1xuICAgICAgICBsZXQgaSA9IE1hdGgubWluKGNvdW50LCBtYXggLSBtaW4gKyAxKTtcbiAgICAgICAgd2hpbGUgKGkgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnQgPSBOdW1iZXJVdGlsaXRpZXMuZ2VuZXJhdGVSYW5kb21OdW1iZXIobWluLCBtYXgpO1xuICAgICAgICAgICAgaWYgKCFudW1iZXJEaWN0W2ludF0pIHtcbiAgICAgICAgICAgICAgICBudW1iZXJEaWN0W2ludF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIG51bWJlcnMucHVzaChpbnQpO1xuICAgICAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtYmVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgYSBnaXZlbiB2YWx1ZSBpcyBhIG51bWVyaWNhbCB2YWx1ZS4gVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gdHJ1ZSBmb3IgbnVtZXJpY2FsIHN0cmluZ3Mgc3VjaCBhcyBcIjEyM1wiIG9yIFwiMi41NFwiXG4gICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB3aGljaCB3aWxsIGJlIHRlc3RlZCB3aGV0aGVyIGl0IGlzIG51bWVyaWMgb3Igbm90LlxuICAgICAqIEByZXR1cm4gdHJ1ZSBpZiB2YWx1ZSBpcyBudW1lcmljLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBpc051bWVyaWModmFsdWU6IHN0cmluZyB8IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUgYXMgc3RyaW5nKSkgJiYgaXNGaW5pdGUodmFsdWUgYXMgbnVtYmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgbWF4aW11bSBpdGVtIGluIGFuIGl0ZXJhYmxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0gaXRlcmFibGUgVGhlIGRhdGEgc291cmNlXG4gICAgICogQHBhcmFtIHNlbGVjdG9yIEEgc2VsZWN0b3IgbWV0aG9kIHdoaWNoIHdpbGwgcmV0dXJuIGEga2V5IHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjb21wYXJpc29uLlxuICAgICAqIEByZXR1cm4gVGhlIGl0ZW0gd2hpY2ggaGFzIHRoZSBtYXhpbXVtIHZhbHVlIGFjY29yZGluZyB0byB0aGUgc2VsZWN0b3IgbWV0aG9kLCBvciBudWxsIGlmIGl0ZXJhYmxlIGlzIGVtcHR5LlxuICAgICAqIEB0aHJvd3MgQW4gZXhjZXB0aW9uIGlmIGl0ZXJhYmxlIGlzIG51bGwgb3IgdW5kZWZpbmVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgbWF4PFRFbGVtZW50PihpdGVyYWJsZTogSXRlcmFibGU8VEVsZW1lbnQ+LCBzZWxlY3Rvcj86IChpdGVtOiBURWxlbWVudCkgPT4gbnVtYmVyKTogVEVsZW1lbnQgfCBudWxsIHtcbiAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBpdGVyYWJsZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBpdGVyYXRvckl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIGxldCBtYXhJdGVtOiBURWxlbWVudDtcbiAgICAgICAgaWYgKGl0ZXJhdG9ySXRlbS5kb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBtYXhJdGVtID0gaXRlcmF0b3JJdGVtLnZhbHVlO1xuICAgICAgICB3aGlsZSAoIWl0ZXJhdG9ySXRlbS5kb25lKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHNlbGVjdG9yKGl0ZXJhdG9ySXRlbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4VmFsdWUgPSBzZWxlY3RvcihtYXhJdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBtYXhWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXhJdGVtID0gaXRlcmF0b3JJdGVtLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXJhdG9ySXRlbS52YWx1ZSA+IG1heEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4SXRlbSA9IGl0ZXJhdG9ySXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVyYXRvckl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heEl0ZW07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIG1pbmltdW0gaXRlbSBpbiBhbiBpdGVyYWJsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIGl0ZXJhYmxlIFRoZSBkYXRhIHNvdXJjZVxuICAgICAqIEBwYXJhbSBzZWxlY3RvciBBIHNlbGVjdG9yIG1ldGhvZCB3aGljaCB3aWxsIHJldHVybiBhIGtleSB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGFyaXNvbi5cbiAgICAgKiBAcmV0dXJuIFRoZSBpdGVtIHdoaWNoIGhhcyB0aGUgbWluaW11bSB2YWx1ZSBhY2NvcmRpbmcgdG8gdGhlIHNlbGVjdG9yIG1ldGhvZCwgb3IgbnVsbCBpZiBpdGVyYWJsZSBpcyBlbXB0eS5cbiAgICAgKiBAdGhyb3dzIEFuIGV4Y2VwdGlvbiBpZiBpdGVyYWJsZSBpcyBudWxsIG9yIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIG1pbjxURWxlbWVudD4oaXRlcmFibGU6IEl0ZXJhYmxlPFRFbGVtZW50Piwgc2VsZWN0b3I/OiAoaXRlbTogVEVsZW1lbnQpID0+IG51bWJlcik6IFRFbGVtZW50IHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IGl0ZXJhdG9yID0gaXRlcmFibGVbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgaXRlcmF0b3JJdGVtID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBsZXQgbWluSXRlbTogVEVsZW1lbnQ7XG4gICAgICAgIGlmIChpdGVyYXRvckl0ZW0uZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbWluSXRlbSA9IGl0ZXJhdG9ySXRlbS52YWx1ZTtcbiAgICAgICAgd2hpbGUgKCFpdGVyYXRvckl0ZW0uZG9uZSkge1xuICAgICAgICAgICAgaWYgKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBzZWxlY3RvcihpdGVyYXRvckl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pblZhbHVlID0gc2VsZWN0b3IobWluSXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgbWluVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluSXRlbSA9IGl0ZXJhdG9ySXRlbS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvckl0ZW0udmFsdWUgPCBtaW5JdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pbkl0ZW0gPSBpdGVyYXRvckl0ZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlcmF0b3JJdGVtID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW5JdGVtO1xuICAgIH1cbn1cbiIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdHJpbmdVdGlsaXRpZXMge1xuICAgIHByaXZhdGUgY29uc3RydWN0b3IoKSB7fVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgcmFuZG9tIHN0cmluZyB3aXRoIHRoZSBnaXZlbiBsZW5ndGguIElmIHRoZSBjaGFyYWN0ZXJzIHBhcmFtZXRlciBpcyBwcm92aWRlZCxcbiAgICAgKiB0aGUgc3RyaW5nIHdpbGwgYmUgZm9ybWVkIGJhc2VkIG9uIHRoYXQgY2hhcmFjdGVycy4gT3RoZXJ3aXNlLCBpdCB3aWxsIHVzZSBbYS16QS1aMC05XSB2YWx1ZXMuXG4gICAgICogVGFrZW4gZnJvbTogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzEzNDk0MjZcbiAgICAgKiBAcGFyYW0gbGVuZ3RoIFRoZSBsZW5ndGggb2YgdGhlIGdlbmVyYXRlZCBzdHJpbmdcbiAgICAgKiBAcGFyYW0gY2hhcmFjdGVycyBUaGUgY2hhcmFjdGVycyBmcm9tIHdoaWNoIHRoZSBzdHJpbmcgd2lsbCBiZSBnZW5lcmF0ZWQuXG4gICAgICogQHJldHVybiBBIHJhbmRvbWx5IGdlbmVyYXRlZCBzdHJpbmcuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbVN0cmluZyhsZW5ndGg6IG51bWJlciwgY2hhcmFjdGVycz86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNoYXJhY3RlcnMgPz89IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcbiAgICB9XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiZXhwb3J0IHsgUkdCLCBSR0JBIH0gZnJvbSBcIi4vY29sb3IvUkdCXCI7XG5leHBvcnQgeyBDb2xvciB9IGZyb20gXCIuL2NvbG9yL0NvbG9yXCI7XG5leHBvcnQgeyBDb2xvclV0aWxpdGllcyB9IGZyb20gXCIuL2NvbG9yL0NvbG9yVXRpbGl0aWVzXCI7XG5leHBvcnQgeyBEYXRhVXRpbGl0aWVzIH0gZnJvbSBcIi4vZGF0YS9EYXRhVXRpbGl0aWVzXCI7XG5leHBvcnQgeyBNYXRoVXRpbGl0aWVzIH0gZnJvbSBcIi4vbWF0aC9NYXRoVXRpbGl0aWVzXCI7XG5leHBvcnQgeyBOdW1iZXJVdGlsaXRpZXMgfSBmcm9tIFwiLi9udW1iZXIvTnVtYmVyVXRpbGl0aWVzXCI7XG5leHBvcnQgeyBTdHJpbmdVdGlsaXRpZXMgfSBmcm9tIFwiLi9zdHJpbmcvU3RyaW5nVXRpbGl0aWVzXCI7XG4iXSwibmFtZXMiOlsiQ29sb3IiLCJyZWQiLCJncmVlbiIsImJsdWUiLCJhbHBoYSIsInZhbHVlIiwiaGV4IiwidGhpcyIsImNvbnZlcnROdW1iZXJUb0hleCIsInRvVXBwZXJDYXNlIiwidGVzdENvbG9yVmFsdWVSYW5nZSIsInN0YXRpYyIsImhhc2hlZEhleCIsInN0YXJ0c1dpdGgiLCJsZW5ndGgiLCJFcnJvciIsIm51bSIsInRvU3RyaW5nIiwic2hvcnRIZXgiLCJoYXNIYXNoIiwiaGV4V2l0aG91dEhhc2giLCJzdWJzdHJpbmciLCJsb25nSGV4IiwiY2hhckF0IiwicmVwZWF0IiwiY29sb3JTdHJpbmciLCJpbnRWYWx1ZSIsIkludGVnZXIiLCJkZWNvZGUiLCJyYW5nZUVycm9yIiwiYmFkQ29tcG9uZW50U3RyaW5nIiwiaGV4Q29sb3IiLCJjaGVja0hleFZhbGlkaXR5IiwiY29udmVydFRvTG9uZ0hleCIsImJyaWdodGVyIiwiZ2V0UmVkIiwiZ2V0R3JlZW4iLCJnZXRCbHVlIiwiZ2V0QWxwaGEiLCJpIiwiTWF0aCIsInRydW5jIiwiRmFjdG9yIiwibWluIiwiZGFya2VyIiwibWF4IiwiZXF1YWxzIiwiY29sb3IiLCJnZXRSR0IiLCJnZXRIZXgiLCJnZXRSR0JBQ29tcG9uZW50cyIsIlJHQkEiLCJnZXRSR0JDb21wb25lbnRzIiwiUkdCIiwiQmxhY2siLCJCbHVlIiwiQ3lhbiIsIkRhcmtHcmF5IiwiR3JheSIsIkdyZWVuIiwiTGlnaHRHcmF5IiwiTWFnZW50YSIsIk9yYW5nZSIsIlBpbmsiLCJSZWQiLCJXaGl0ZSIsIlllbGxvdyIsIkNvbG9yVXRpbGl0aWVzIiwic3RhcnRDb2xvciIsImVuZENvbG9yIiwiY29sb3JDb3VudCIsInN0YXJ0UkdCIiwiY3JlYXRlRnJvbUhleFN0cmluZyIsImVuZFJHQiIsInBhbGV0dGUiLCJwdXNoIiwicGkiLCJyIiwiUkVEIiwiZyIsIkdSRUVOIiwiYiIsIkJMVUUiLCJyZXZlcnNlIiwiZmxvb3IiLCJyYW5kb20iLCJzaXplIiwiY29sb3JzIiwiY3giLCJnZW5lcmF0ZVJhbmRvbUNvbG9yIiwiZW5zdXJlUkdCVmFsdWVJc0luUmFuZ2UiLCJhIiwic3VwZXIiLCJBTFBIQSIsIml0ZXJhYmxlIiwic2VsZWN0b3IiLCJjb21wYXJhdG9yIiwiaXRlbSIsImtleTEiLCJrZXkyIiwiT2JqZWN0IiwiaXMiLCJkaXN0aW5jdExpc3QiLCJleGlzdHMiLCJkaXN0aW5jdEl0ZW0iLCJudW1TdHIiLCJyZXN1bHQiLCJyYWRpeCIsImluZGV4IiwibmVnYXRpdmUiLCJmaXJzdENoYXIiLCJwYXJzZUludCIsImUiLCJjb25zdGFudCIsImRlZ3JlZSIsIlBJIiwicmFkaWFuIiwiTnVtYmVyVXRpbGl0aWVzIiwiY291bnQiLCJBcnJheSIsIm1hcCIsImdlbmVyYXRlUmFuZG9tTnVtYmVyIiwia2V5cyIsInYiLCJudW1iZXJzIiwibnVtYmVyRGljdCIsImludCIsImlzTmFOIiwicGFyc2VGbG9hdCIsImlzRmluaXRlIiwiaXRlcmF0b3IiLCJTeW1ib2wiLCJtYXhJdGVtIiwiaXRlcmF0b3JJdGVtIiwibmV4dCIsImRvbmUiLCJtaW5JdGVtIiwiY2hhcmFjdGVycyIsImNoYXJhY3RlcnNMZW5ndGgiLCJqb2luIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9